-- MySQL Script generated by MySQL Workbench
-- Thu May 13 18:27:31 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema sanitappprueba
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `sanitappprueba` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `sanitappprueba` ;

-- -----------------------------------------------------
-- Table `sanitappprueba`.`especialidad`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`especialidad` (
  `idespecialidad` BIGINT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idespecialidad`),
  UNIQUE INDEX `nombre_UNIQUE` (`nombre` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

INSERT INTO especialidad (nombre) VALUES ("Acupuntura");
INSERT INTO especialidad (nombre) VALUES ("Osteopatia");
INSERT INTO especialidad (nombre) VALUES ("Fisioterapia");
INSERT INTO especialidad (nombre) VALUES ("Quiromasaje");
INSERT INTO especialidad (nombre) VALUES ("Odontologia");

-- -----------------------------------------------------
-- Table `sanitappprueba`.`paciente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`paciente` (
  `idpaciente` BIGINT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `dni` VARCHAR(9) NOT NULL,
  `telefono` INT NULL DEFAULT NULL,
  `diagnostico` VARCHAR(255) NOT NULL,
  `fecha_nacimiento` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`idpaciente`),
  UNIQUE INDEX `dni_UNIQUE` (`dni` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

INSERT INTO paciente (nombre,dni,telefono,diagnostico,fecha_nacimiento) VALUES ("Axel","12457845j",887887887,"Diagnostico1",now());
INSERT INTO paciente (nombre,dni,telefono,diagnostico,fecha_nacimiento) VALUES ("Maria","22457845j",887887887,"Diagnostico2",now());
INSERT INTO paciente (nombre,dni,telefono,diagnostico,fecha_nacimiento) VALUES ("Juan","13457845j",887887887,"Diagnostico3",now());
INSERT INTO paciente (nombre,dni,telefono,diagnostico,fecha_nacimiento) VALUES ("Pepe","14457845j",887887887,"Diagnostico4",now());
INSERT INTO paciente (nombre,dni,telefono,diagnostico,fecha_nacimiento) VALUES ("Antonio","12557845j",887887887,"Diagnostico5",now());
INSERT INTO paciente (nombre,dni,telefono,diagnostico,fecha_nacimiento) VALUES ("Ana","12457875j",887887887,"Diagnostico6",now());
INSERT INTO paciente (nombre,dni,telefono,diagnostico,fecha_nacimiento) VALUES ("Amparo","12467845j",887887887,"Diagnostico7",now());
INSERT INTO paciente (nombre,dni,telefono,diagnostico,fecha_nacimiento) VALUES ("Roc√≠o","12458845j",887887887,"Diagnostico8",now());


-- -----------------------------------------------------
-- Table `sanitappprueba`.`cita`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`cita` (
  `idcita` BIGINT NOT NULL AUTO_INCREMENT,
  `idpaciente` BIGINT NOT NULL,
  `fecha` DATETIME NULL DEFAULT NULL,
  `idespecialidad` BIGINT NOT NULL,
  `estado` VARCHAR(10) NULL DEFAULT 'pendiente',
  PRIMARY KEY (`idcita`),
  INDEX `fk_paciente_idx` (`idpaciente` ASC) VISIBLE,
  INDEX `fk_especialidad_idx` (`idespecialidad` ASC) VISIBLE,
  CONSTRAINT `fk_cita_especialidad`
    FOREIGN KEY (`idespecialidad`)
    REFERENCES `sanitappprueba`.`especialidad` (`idespecialidad`),
  CONSTRAINT `fk_cita_paciente`
    FOREIGN KEY (`idpaciente`)
    REFERENCES `sanitappprueba`.`paciente` (`idpaciente`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

INSERT INTO cita (idpaciente,fecha,idespecialidad,estado) VALUES (1,now(),1,"pendiente");
INSERT INTO cita (idpaciente,fecha,idespecialidad,estado) VALUES (2,now(),2,"terminada");
INSERT INTO cita (idpaciente,fecha,idespecialidad,estado) VALUES (3,now(),3,"pendiente");
INSERT INTO cita (idpaciente,fecha,idespecialidad,estado) VALUES (1,now(),4,"terminada");
INSERT INTO cita (idpaciente,fecha,idespecialidad,estado) VALUES (2,now(),1,"pendiente");
INSERT INTO cita (idpaciente,fecha,idespecialidad,estado) VALUES (3,now(),2,"terminada");
INSERT INTO cita (idpaciente,fecha,idespecialidad,estado) VALUES (1,now(),3,"pendiente");
INSERT INTO cita (idpaciente,fecha,idespecialidad,estado) VALUES (2,now(),4,"terminada");
-- -----------------------------------------------------
-- Table `sanitappprueba`.`usuario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`usuario` (
  `idusuario` BIGINT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(45) NOT NULL,
  `password` VARCHAR(255) NOT NULL,
  `rol` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`idusuario`),
  UNIQUE INDEX `user_UNIQUE` (`username` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

INSERT INTO `usuario` VALUES (1,'admin','$2a$10$ZVzaTO0Uu1C7I6nhLJdTduNJ9bqHczL2yFnPSzDZWxjTyLoDmUUqm','ADMIN'),(2,'user','$2a$10$kL07abrZ05y8c/mrbUIS7eylFzopc.oCTHZFwCZkfrPEh1NWa6ATy','USER'),(3,'78451212j','$2a$10$cD/D5Iy4ufaOyUe4wc/APerf4msSB2jR3r8KrTjl17zlG5QizNx8y','JOB'),(4,'88451212j','$2a$10$DDkCmPqSn9uFDTin192DMO.FSPA4YHhx2w2sh/ImQgozZvfO7xHCy','JOB'),(5,'98451212j','$2a$10$gegeFFOe8.Zrjnqflx2Oq.BYeoYztg0FRN5wmokB48//bn4rHFqxS','JOB'),(6,'08451212j','$2a$10$M/dlalD2RDZbe0/fMR9kLe7viJha5S2qO.IP3u8jugIMKfTAMDC4W','JOB'),(7,'18451212j','$2a$10$VBhexhrOwNHY.lau4TG6P.hDJ7Vzbt8giyz09HiD9fWcqwgN3D75e','JOB'),(8,'28451212j','$2a$10$b22FKUxXA65b7/YYQgKR6eVwdhj9HrKpQ54GlJMX931zI7JmJploW','JOB'),(9,'38451212j','$2a$10$Bi6L4h.YhuXi53MXlgsOj.BtuM.mccUbs4b.Uz/DFQOCf1rl5Ktxe','JOB'),(10,'22322321l','$2a$10$F3s14GQqm9Qr.dlv98dfKOAct8ntpouLbyY65obE1.ZMZ27o3Z9Ji','JOB');

/*
INSERT INTO usuario (username,password,rol) VALUES ("admin","admin","ADMIN");
INSERT INTO usuario (username,password,rol) VALUES ("user","user","USER");
INSERT INTO usuario (username,password,rol) VALUES ("78451212j","1234","JOB");
INSERT INTO usuario (username,password,rol) VALUES ("88451212j","1234","JOB");
INSERT INTO usuario (username,password,rol) VALUES ("98451212j","1234","JOB");
INSERT INTO usuario (username,password,rol) VALUES ("08451212j","1234","JOB");
INSERT INTO usuario (username,password,rol) VALUES ("18451212j","1234","JOB");
INSERT INTO usuario (username,password,rol) VALUES ("28451212j","1234","JOB");
INSERT INTO usuario (username,password,rol) VALUES ("38451212j","1234","JOB");
*/
-- -----------------------------------------------------
-- Table `sanitappprueba`.`especialista`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`especialista` (
  `idespecialista` BIGINT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `dni` VARCHAR(9) NOT NULL,
  `telefono` INT NULL DEFAULT NULL,
  `idespecialidad` BIGINT NOT NULL,
  `idusuario` BIGINT NOT NULL,
  PRIMARY KEY (`idespecialista`),
  UNIQUE INDEX `dni_UNIQUE` (`dni` ASC) VISIBLE,
  INDEX `fk_especialidad_idx` (`idespecialidad` ASC) VISIBLE,
  INDEX `fk_especialista_usuario_idx` (`idusuario` ASC) VISIBLE,
  CONSTRAINT `fk_especialidad`
    FOREIGN KEY (`idespecialidad`)
    REFERENCES `sanitappprueba`.`especialidad` (`idespecialidad`),
  CONSTRAINT `fk_especialista_usuario`
    FOREIGN KEY (`idusuario`)
    REFERENCES `sanitappprueba`.`usuario` (`idusuario`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

INSERT INTO especialista (nombre,dni,telefono,idespecialidad,idusuario) VALUES ("Juan","78451212j",612212112,1,3);
INSERT INTO especialista (nombre,dni,telefono,idespecialidad,idusuario) VALUES ("Axel","88451212j",613312112,2,4);
INSERT INTO especialista (nombre,dni,telefono,idespecialidad,idusuario) VALUES ("Sandra","98451212j",612442112,3,5);
INSERT INTO especialista (nombre,dni,telefono,idespecialidad,idusuario) VALUES ("Esther","08451212j",612552112,4,6);
INSERT INTO especialista (nombre,dni,telefono,idespecialidad,idusuario) VALUES ("Maria","18451212j",612166112,1,7);
INSERT INTO especialista (nombre,dni,telefono,idespecialidad,idusuario) VALUES ("Jose","28451212j",612117712,2,8);
INSERT INTO especialista (nombre,dni,telefono,idespecialidad,idusuario) VALUES ("Fran","38451212j",612118812,3,9);

-- -----------------------------------------------------
-- Table `sanitappprueba`.`factura`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`factura` (
  `idfactura` BIGINT NOT NULL AUTO_INCREMENT,
  `fecha` DATETIME NULL DEFAULT NULL,
  `idpaciente` BIGINT NOT NULL,
  `importe` FLOAT NOT NULL,
  `idespecialista` BIGINT NOT NULL,
  PRIMARY KEY (`idfactura`),
  INDEX `fk_factura_paciente1_idx` (`idpaciente` ASC) VISIBLE,
  INDEX `fk_factura_especialista_idx` (`idespecialista` ASC) VISIBLE,
  CONSTRAINT `fk_factura_especialista`
    FOREIGN KEY (`idespecialista`)
    REFERENCES `sanitappprueba`.`especialista` (`idespecialista`),
  CONSTRAINT `fk_factura_paciente1`
    FOREIGN KEY (`idpaciente`)
    REFERENCES `sanitappprueba`.`paciente` (`idpaciente`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

INSERT INTO `factura` VALUES (1,'2021-05-13 19:35:33',1,75,1),(2,'2021-05-13 19:35:51',4,25,5),(3,'2021-05-13 19:36:03',2,75,1),(4,'2021-05-13 19:36:14',1,75,4),(5,'2021-05-13 19:36:25',2,60,1);


-- -----------------------------------------------------
-- Table `sanitappprueba`.`proveedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`proveedor` (
  `idproveedor` BIGINT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `dni` VARCHAR(9) NOT NULL,
  `telefono` INT NULL DEFAULT NULL,
  PRIMARY KEY (`idproveedor`),
  UNIQUE INDEX `dni_UNIQUE` (`dni` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

INSERT INTO proveedor (nombre,dni,telefono) VALUES ("Distribuciones JM","56568785K",445445445);
INSERT INTO proveedor (nombre,dni,telefono) VALUES ("Cremas S.A.","12457485k",445447745);
INSERT INTO proveedor (nombre,dni,telefono) VALUES ("Jose & CIA","33669988l",445445335);

-- -----------------------------------------------------
-- Table `sanitappprueba`.`producto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`producto` (
  `idproducto` BIGINT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `descripcion` VARCHAR(255) NULL DEFAULT NULL,
  `precio` FLOAT NULL DEFAULT NULL,
  `idproveedor` BIGINT NULL DEFAULT NULL,
  PRIMARY KEY (`idproducto`),
  INDEX `fk_proveedor_idx` (`idproveedor` ASC) VISIBLE,
  CONSTRAINT `fk_proveedor`
    FOREIGN KEY (`idproveedor`)
    REFERENCES `sanitappprueba`.`proveedor` (`idproveedor`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

INSERT INTO producto (nombre,descripcion,precio,idproveedor) VALUES ("Crema 1","Crema 1",25,1);
INSERT INTO producto (nombre,descripcion,precio,idproveedor) VALUES ("Crema 2","Crema 2",25,2);
INSERT INTO producto (nombre,descripcion,precio,idproveedor) VALUES ("Pastillas 1","Pastillas 1",25,3);
INSERT INTO producto (nombre,descripcion,precio,idproveedor) VALUES ("Pastillas 2","Pastillas 2",25,1);
INSERT INTO producto (nombre,descripcion,precio,idproveedor) VALUES ("Jarabe 1","Jarabe 1",25,2);
-- -----------------------------------------------------
-- Table `sanitappprueba`.`factura_tiene_productos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`factura_tiene_productos` (
  `idfactura` BIGINT NOT NULL,
  `idproducto` BIGINT NOT NULL,
  PRIMARY KEY (`idfactura`, `idproducto`),
  INDEX `fk_factura_has_producto_producto1_idx` (`idproducto` ASC) VISIBLE,
  INDEX `fk_factura_has_producto_factura_idx` (`idfactura` ASC) VISIBLE,
  CONSTRAINT `fk_factura_has_producto_factura`
    FOREIGN KEY (`idfactura`)
    REFERENCES `sanitappprueba`.`factura` (`idfactura`),
  CONSTRAINT `fk_factura_has_producto_producto1`
    FOREIGN KEY (`idproducto`)
    REFERENCES `sanitappprueba`.`producto` (`idproducto`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

INSERT INTO `factura_tiene_productos` VALUES (1,1),(2,1),(4,1),(1,2),(3,3),(4,3),(5,3),(1,4),(3,4),(3,5),(4,5),(5,5),(5,6);

-- -----------------------------------------------------
-- Table `sanitappprueba`.`tratamiento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`tratamiento` (
  `idtratamiento` BIGINT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `descripcion` VARCHAR(45) NULL DEFAULT NULL,
  `precio` FLOAT NULL DEFAULT NULL,
  `idespecialidad` BIGINT NOT NULL,
  PRIMARY KEY (`idtratamiento`),
  INDEX `fk_especialista_idx` (`idespecialidad` ASC) VISIBLE,
  CONSTRAINT `fk_especialista`
    FOREIGN KEY (`idespecialidad`)
    REFERENCES `sanitappprueba`.`especialidad` (`idespecialidad`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `sanitappprueba`.`sesion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sanitappprueba`.`sesion` (
  `idsesion` BIGINT NOT NULL AUTO_INCREMENT,
  `descripcion` VARCHAR(255) NOT NULL,
  `idcita` BIGINT NOT NULL,
  `idespecialista` BIGINT NOT NULL,
  `idtratamiento` BIGINT NOT NULL,
  PRIMARY KEY (`idsesion`),
  UNIQUE INDEX `idcita_UNIQUE` (`idcita` ASC) VISIBLE,
  INDEX `fk_sesion_especialista_idx` (`idespecialista` ASC) VISIBLE,
  INDEX `fk_sesion_cita_idx` (`idcita` ASC) VISIBLE,
  INDEX `fk_sesion_tratamiento_idx` (`idtratamiento` ASC) VISIBLE,
  CONSTRAINT `fk_sesion_cita`
    FOREIGN KEY (`idcita`)
    REFERENCES `sanitappprueba`.`cita` (`idcita`),
  CONSTRAINT `fk_sesion_especialista`
    FOREIGN KEY (`idespecialista`)
    REFERENCES `sanitappprueba`.`especialista` (`idespecialista`),
  CONSTRAINT `fk_sesion_tratamiento`
    FOREIGN KEY (`idtratamiento`)
    REFERENCES `sanitappprueba`.`tratamiento` (`idtratamiento`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;




